import React, { useState } from 'react';
import { useRouteMeta } from '../../../hooks/useRouteMeta';

type PolicySection = {
  id: string;
  title: string;
  content: string;
};

const policyData: PolicySection[] = [
  {
    id: 'service',
    title: '서비스 이용약관',
    content: `## 온도룩 이용약관

**부칙 (2025.04.10)**

본 약관은 2025년 4월 10일부터 적용됩니다.

---

### 제 1조 목적

본 약관은 회원(이하 "회원")이 온도룩(이하 "회사")이 제공하는 모바일 애플리케이션 및 관련 서비스(이하 "서비스")를 이용함에 있어 회사와 회원 간의 권리, 의무 및 책임사항을 규정함을 목적으로 합니다.

---

### 제 2조 정의

1. "서비스"라 함은 회사가 제공하는 날씨 및 일정 기반 맞춤형 코디 추천 및 알림 제공 서비스를 말합니다.
2. "회원"이라 함은 본 약관에 동의하고, 회사의 서비스에 접속하여 이용하는 자를 말합니다.
3. "아이디(ID)"란 회원의 식별과 서비스 이용을 위해 회원이 설정하고 회사가 승인한 문자와 숫자의 조합입니다.
4. "게시물"이란 회원이 서비스 이용 중 앱에 업로드하거나 작성한 정보(예: 피드백, 프로필, 설정 등)를 말합니다.

---

### 제 3조 서비스의 내용 및 제공

1. 본 서비스는 사용자의 위치 기반 날씨 정보와 연동된 캘린더 일정 데이터를 바탕으로, 해당 상황에 적절한 코디(복장) 추천 정보를 제공합니다.
2. 주요 기능은 다음과 같습니다.
    - 위치 기반 실시간 날씨 조회
    - 일정 기반 코디 추천 (사용자 설정 알림 포함)
    - 마이페이지에서 성별, 선호스타일 등 설정 기반 개인화 기능
    - 추천 알림 시간 설정 및 수정 기능
3. 회사는 서비스의 안정적 제공을 위해 지속적으로 업데이트 및 개선할 수 있습니다.

---

### 제 4조 개인정보 보호

1. 회사는 서비스 제공을 위해 최소한의 개인정보(이름, 생년월일, 성별, 위치정보 등)를 수집하며, 관련 법령에 따라 보호하고 처리합니다.
2. 수집된 개인정보는 서비스 제공 목적 외로 사용되지 않으며, 제3자 제공은 별도 동의를 통해서만 이뤄집니다.
3. 자세한 사항은 별도의 [개인정보 처리방침]에 따릅니다.

---

### 제 5조 회원가입 및 관리

1. 회원가입은 소셜 로그인(카카오, 구글) 또는 자사 회원가입 절차를 통해 가능합니다.
2. 회원은 정확한 정보를 제공하여야 하며, 허위 정보 등록 시 서비스 이용이 제한될 수 있습니다.
3. 회원은 언제든지 마이페이지를 통해 개인정보를 수정하거나 탈퇴할 수 있습니다.

---

### 제 6조 서비스의 변경 및 중단

1. 회사는 서비스 운영상 또는 기술상 필요에 따라 서비스를 변경하거나 중단할 수 있습니다.
2. 변경/중단 시에는 사전 공지하며, 긴급한 경우 사후 통지할 수 있습니다.
3. 서비스 중단 시 회원에게 별도의 보상을 하지 않으며, 이는 무료 서비스의 특성에 따른 것입니다.

---

### 제 7조 저작권 및 콘텐츠 이용

1. 온도룩에서 제공하는 콘텐츠(코디 이미지, 캐릭터, 문구 등)의 저작권은 회사에 있으며, 무단 복제·배포를 금합니다.
2. 회원이 작성한 게시물의 저작권은 해당 회원에게 있으나, 회사는 서비스 운영, 홍보 등을 위해 필요한 범위 내에서 사용(수정·편집 포함)할 수 있습니다.

---

### 제 8조 이용 제한 및 해지

1. 회원이 다음 각 호에 해당하는 경우, 회사는 사전통지 없이 이용을 제한하거나 회원자격을 박탈할 수 있습니다.
    - 타인의 정보 도용
    - 서비스 운영 방해
    - 저작권 침해, 명예훼손 등 불법 행위
    - 기타 법령 또는 약관 위반
2. 회원은 언제든지 앱 내 마이페이지를 통해 탈퇴할 수 있으며, 탈퇴 시 개인정보는 관련 법령에 따라 처리됩니다.

---

### 제 9조 책임의 제한

1. 회사는 천재지변, 통신 장애, 기술적 결함 등 불가항력 사유로 인한 서비스 제공 중단에 대해 책임을 지지 않습니다.
2. 회사는 회원 간 혹은 회원과 제3자 간의 분쟁에 개입하지 않으며, 그로 인한 손해에 대해 책임을 지지 않습니다.
3. 회사는 무료로 제공되는 서비스와 관련하여 법령에 특별한 규정이 없는 한 손해배상 책임을 지지 않습니다.

---

### 제 10조 약관의 개정

1. 회사는 약관을 개정할 수 있으며, 개정 시 적용일자 및 개정 사유를 명시하여 앱 초기 화면 또는 알림을 통해 공지합니다.
2. 개정 약관에 동의하지 않을 경우, 회원은 이용계약을 해지할 수 있습니다.

---

### 제 11조 준거법 및 재판관할

1. 본 약관은 대한민국 법률에 따라 해석됩니다.
2. 서비스 이용과 관련하여 발생한 분쟁에 대해서는 회사의 본사 소재지를 관할하는 법원을 제1심 관할 법원으로 합니다.`,
  },
  {
    id: 'privacy',
    title: '개인정보 처리방침',
    content: `온도룩(이하 "회사")은 개인정보보호법에 따라 이용자의 개인정보 보호 및 권익을 보호하고 개인정보와 관련한 이용자의 고충을 원활하게 처리할 수 있도록 다음과 같은 처리방침을 두고 있습니다.

제 1조 (개인정보의 처리 목적)
회사는 개인정보를 다음의 목적을 위해 처리합니다. 처리한 개인정보는 다음의 목적 이외의 용도로는 사용되지 않으며 이용 목적이 변경될 시에는 사전동의를 구할 예정입니다.

제 2조 (개인정보의 처리 및 보유 기간)
1) 회사는 법령에 따른 개인정보 보유·이용기간 또는 정보주체로부터 개인정보를 수집 시에 동의 받은 개인정보 보유·이용기간 내에서 개인정보를 처리·보유합니다.
2) 각각의 개인정보 처리 및 보유 기간은 다음과 같습니다.`,
  },
  {
    id: 'location',
    title: '위치기반 서비스 이용약관',
    content: `위치기반서비스 이용약관은 온도룩(이하 "회사")이 제공하는 위치기반서비스와 관련하여 회사와 위치기반서비스를 이용하는 개인위치정보주체와의 권리, 의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다.

제 1조 (목적)
이 약관은 회사가 제공하는 위치기반서비스와 관련하여 회사와 개인위치정보주체와의 권리, 의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다.

제 2조 (이용약관의 효력 및 변경)
1. 본 약관은 서비스를 신청한 고객 또는 개인위치정보주체가 본 약관에 동의하고 회사가 정한 소정의 절차에 따라 서비스의 이용자로 등록함으로써 효력이 발생합니다.
2. 회사는 본 약관의 내용을 개인위치정보주체가 쉽게 알 수 있도록 서비스 초기 화면에 게시하거나 기타의 방법으로 공지합니다.`,
  },
];

const Policy = () => {
  const { setHeaderMeta } = useRouteMeta();
  const [selectedPolicy, setSelectedPolicy] = useState<PolicySection | null>(null);

  const handlePolicySelect = (policy: PolicySection) => {
    setSelectedPolicy(policy);
    setHeaderMeta({
      title: policy.title,
      isShowBack: true,
    });
  };

  const handleBack = () => {
    setSelectedPolicy(null);
    setHeaderMeta({
      title: '약관 및 정책',
      isShowBack: true,
    });
  };

  // 컴포넌트 마운트 시 초기 헤더 설정
  React.useEffect(() => {
    setHeaderMeta({
      title: '약관 및 정책',
      isShowBack: true,
    });
  }, []);

  if (selectedPolicy) {
    return (
      <div className="bg-white min-h-full px-5 py-4">
        <button onClick={handleBack} className="text-[#8E8E8E] text-sm mb-4">
          ← 목록으로 돌아가기
        </button>
        <div className="text-base whitespace-pre-line">{selectedPolicy.content}</div>
      </div>
    );
  }

  return (
    <div className="bg-white ">
      <div className="px-5 py-4">
        {policyData.map(policy => (
          <div
            key={policy.id}
            onClick={() => handlePolicySelect(policy)}
            className="py-4 border-b border-[#F0F0F0] cursor-pointer"
          >
            <div className="flex items-center justify-between">
              <span className="text-base font-medium">{policy.title}</span>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#8E8E8E"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              >
                <polyline points="9 18 15 12 9 6" />
              </svg>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};

export default Policy;
